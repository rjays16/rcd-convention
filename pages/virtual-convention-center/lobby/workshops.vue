<template>
	<section>
		<VCCPreLoader />
		<div class="vcc-banner-container">
			<div class="vcc-banner-img">
				<img src="/assets/images/vcc/WORKSHOPS_HALL.jpg" alt="">
				<div class="vcc-vimeo-container">
					<iframe src="https://vimeo.com/event/2243209/embed" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
				</div>
			</div>
		</div>
		<div class="vcc-switch-btn">
			<NuxtLink to="/virtual-convention-center/lobby">
				Back to<br><span>Main Lobby</span>
			</NuxtLink>
		</div>

		<div class="container">

			<!-- Plenary tabs -->
			<ul class="nav nav-tabs" id="myTab" role="tablist">
				<li class="nav-item" role="presentation">
					<button class="nav-link orange active" id="plenary-one-tab" data-bs-toggle="tab" data-bs-target="#plenary1" type="button" role="tab" aria-controls="plenary1" aria-selected="false">
						<span class="tab-head-main gwendolyn-bold">Energy-Based Devices/Laser</span>
						<span class="tab-head-second">DAY 1: October 26, 2022 (Wednesday)</span>
					</button>
				</li>
				<li class="nav-item" role="presentation">
					<button class="nav-link yellow" id="plenary-two-tab" data-bs-toggle="tab" data-bs-target="#plenary2" role="tab" aria-controls="plenary2" aria-selected="false">
						<span class="tab-head-main gwendolyn-bold">Aesthetic/Cosmetic Dermatology</span>
						<span class="tab-head-second">DAY 2: October 27, 2022 (Thursday)</span>
					</button>
				</li>
			</ul>
			<!-- Tab panes -->
			<div class="tab-content">
				<div class="tab-pane fade show active" id="plenary1" role="tabpanel" aria-labelledby="plenary-one-tab">
					<div class="vcc-heading-text">
						<h1>WORKSHOP ON ENERGY-BASED DEVICES (EBD)/LASERS IN DERMATOLOGY<br>PARADIGMS OF TREATMENT THEME:</h1>
						<h2>Real-World Application of Lasers in Dermatology for Common Skin Concerns</h2>
						<h3>02:00 pm - 04:00 pm (GMT+8:00)</h3>
					</div>

					<div class="vcc-program">
						<h4 class="orange">Introduction to the workshop</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Maria Pilar Leuenberger, MD</li>
							</ul>
							<span>5 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Laser facial-quarter life rejuvenation and beyond</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Inneke Jane Hidajat, MD</li>
							</ul>
							<span>20 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>OPEN FORUM</h4>
						<div class="vcc-program-time">
							<ul>
								<li>RCD 2022 MODERATORS</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Laser treatment of red colors from acne to scars</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Wong Su-Ni, MD</li>
							</ul>
							<span>20 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>open forum</h4>
						<div class="vcc-program-time">
							<ul>
								<li>rcd 2022 moderators</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Pitfalls in Skin Laser Surgery and How to Avoid them</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Prof. Woraphong Manuskiatti, MD</li>
							</ul>
							<span>20 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>open forum</h4>
						<div class="vcc-program-time">
							<ul>
								<li>rcd 2022 moderators</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Dynamic Technology in Dermatology: Home-Use devices to Precision Imaging</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Maria Pilar Leuenberger, MD</li>
							</ul>
							<span>20 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>open forum</h4>
						<div class="vcc-program-time">
							<ul>
								<li>rcd 2022 moderators</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="orange">Workshop summary: Clinical Pearls in Laser Treatment</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Kathryn Anne Cembrano-Mamaclay, MD</li>
							</ul>
							<span>5 MINUTES SESSION</span>
						</div>
					</div>

				</div>

				<div class="tab-pane fade show active" id="plenary2" role="tabpanel" aria-labelledby="plenary-two-tab">
					<div class="vcc-heading-text">
						<h1>WORKSHOP ON AESTHETIC/COSMETIC DERMATOLOGY<br>PARADIGMS OF TREATMENT THEME:</h1>
						<h2>A MEDLEY OF EASY TO ADVANCED PROCEDURES ON FACIAL ENHANCEMENT FOR THE DERMATOLOGIST</h2>
						<h3>02:00 pm - 04:30 pm (GMT+8:00)</h3>
					</div>

					<div class="vcc-program">
						<h4 class="orange">Introduction to the workshop</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Ma. Purita Paz Lao, MD</li>
							</ul>
							<span>5 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Temple and Forehead Contouring</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Jinda Rojanamatin, MD</li>
							</ul>
							<span>25 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Natural Lip Enhancement and dealing with complications</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Angeline Yong, MD</li>
							</ul>
							<span>25 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>OPEN FORUM</h4>
						<div class="vcc-program-time">
							<ul>
								<li>rcd 2022 moderators</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Microtoxin-A Injections to age-revealing areas: lower face and neck</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Ma. Purita Paz-Lao, MD</li>
							</ul>
							<span>25 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">Tips and Tricks with Toxins and Fillers</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Arthur Swift, MD</li>
							</ul>
							<span>25 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="blue">PDO Thread Lifting vs PDO Powder Lifting</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Han Jin Kwon, MD</li>
							</ul>
							<span>25 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4>OPEN FORUM</h4>
						<div class="vcc-program-time">
							<ul>
								<li>rcd 2022 moderators</li>
							</ul>
							<span>10 MINUTES SESSION</span>
						</div>
					</div>
					<div class="vcc-program">
						<h4 class="orange">Workshop summary: AESTHETIC/COSMETIC DERMATOLOGY</h4>
						<div class="vcc-program-time">
							<ul>
								<li>Ma. Purita Paz Lao, MD</li>
							</ul>
							<span>5 MINUTES SESSION</span>
						</div>
					</div>

				</div>
			</div>

		</div>

		<!-- CHAT iframe -->
		<div class="chat-box corner-rounded">
			<div class="col-12 pr-0 text-right clickable bg-primary corner-rounded" @click="toggleChat">
				<div class="row px-0">
					<div class="col-10 text-left">
						<h5 class="mt-2 ps-2 text-white">
							Chat
						</h5>
					</div>
				</div>
			</div>
			<div class="vimeo-chat-container" :class="chat_is_opened ? '' : 'd-none'">
				<iframe src="https://vimeo.com/event/2243155/chat/" width="100%" height="100%" frameborder="0" id="chatFrame"></iframe>
			</div>
		</div>

<!--    <ModalsWorkshopVcc ref="Workshop"/>-->
    <VCCPreloaderNotAbleToAccess v-if="show_loader_not_access_site === true"/>
<!--    <VCCPreloader :loader="show_loader_not_access_site"/>-->
	</section>
</template>

<script>
export default {
	middleware: "auth",
	layout: "vcc",
	data () {
		return {
			form: {
				member_id: null,
        registration_type_id: null,
				workshop_start_date: null,
        workshop_paid_aesthetic: false,
        workshop_paid_laser: false,
        workshop_paid_both: false,
			},
			log: {
				convention_member_id: null,
				url: this.$nuxt.$route.path,
				is_login: false,
				is_logout: false,
			},
			workshop: {},
			userinfo: {},
			show_loader_not_access_site: false,
			has_paid_ws_laser: false,
			has_paid_ws_aesth: false,
			has_paid_ws_both: false,
			member_type: null,
			timestamp: null,
			today: null,
			date: null,
			time: null,
      month: null,
	  chat_is_opened: true
		};
	},
	beforeRouteLeave(to, from, next) {
		if(this.show_loader_not_access_site !== true){
			this.$confirm("If you leave now, your estimated stay duration may affect the reporting of your attendance to the current session. Are you sure you want to leave?", {
				dangerouslyUseHTMLString: true,
				cancelButtonText: 'Stay',
				confirmButtonText: 'Leave',
				type: 'warning',
			})
			.then(() => {
				sessionStorage.removeItem('reload');
				this.logoutDelegateAttendance()
				next()
			}).catch(() => {
				next(false)
			})
		}else{
			next()
		}
	},
	methods: {
		getUser() {
			this.$store.dispatch("auth/getUser")
				.then(res => {
          this.form.workshop_paid_aesthetic = res.data.member.paid_fees.has_paid_ws_aesth;
          this.form.workshop_paid_laser = res.data.member.paid_fees.has_paid_ws_laser;
          this.form.workshop_paid_both = res.data.member.paid_fees.has_paid_ws_both;
          this.form.registration_type_id = res.data.member.type;
					this.form.member_id = res.data.member.id;
					this.getUserInfo();
					this.isReloaded()
				}).catch(err => {
				this.$message.error(err)
			})
		},
		getNow: function() {
			this.today = new Date();
      // In case month is change
      this.month = this.today.getMonth() + 1 < 10 ? ('0'+(this.today.getMonth() + 1)) : (this.today.getMonth() + 1);
      this.day = this.today.getDate() < 10 ? ('0'+(this.today.getDate())) : this.today.getDate();
      this.date = this.today.getFullYear()+'-'+ this.month +'-'+ this.day;
			// this.date = this.today.getFullYear()+'-'+('0'+(this.today.getMonth() + 1))+'-'+ this.today.getDate();
			this.time = this.today.getHours() + ":" + this.today.getMinutes() + ":" + this.today.getSeconds();
			this.dateTime = this.date +' '+ this.time;
			this.timestamp = this.dateTime;
			setTimeout(this.getNow, 1000);
		},
		getShownOpeningWorkshop() {
			this.$store.dispatch('vcc/getOpeningDateWorkshop')
			.then(res => {
				this.workshop = res.data;
				//check date for laser or Both Aesthetic and Laser
				if(this.workshop[0].workshop_sdate === this.date || this.workshop[0].workshop_edate === this.date) {
				this.form.workshop_start_date = this.workshop[0].workshop_sdate;
				}
				//check for Aesthetic
				if (this.workshop[1].workshop_sdate === this.date || this.workshop[1].workshop_edate === this.date) {
				this.form.workshop_start_date = this.workshop[1].workshop_sdate;
				}
        //check for both workshop
        if (this.workshop[2].workshop_sdate === this.date || this.workshop[2].workshop_edate === this.date) {
          this.form.workshop_start_date = this.workshop[2].workshop_sdate;
        }
			})
		},
		getUserInfo() {
      if(this.form.workshop_start_date !== null) {
        this.form.is_loading = false;
        this.$store.dispatch('vcc/getWorkshopInfoUser', [this.form.member_id + '/' + this.form.workshop_start_date])
          .then(res => {
            this.userinfo = res.data;
            if (this.workshop[0].workshop_sdate === this.date && this.workshop[0].workshop_edate === this.date &&
              this.form.workshop_paid_laser === false && this.userinfo.Attend_Workshop !== "FREE") {

              if (this.form.registration_type_id === 10 || this.form.registration_type_id === 1) {
                this.show_loader_not_access_site = false;
              } else {
                this.show_loader_not_access_site = true;
              }
            }

            if (this.workshop[1].workshop_sdate === this.date && this.workshop[1].workshop_edate === this.date &&
              this.form.workshop_paid_aesthetic === false && this.userinfo.Attend_Workshop !== "FREE") {

              if (this.form.registration_type_id === 10 || this.form.registration_type_id === 1) {
                this.show_loader_not_access_site = false;
              } else {
                this.show_loader_not_access_site = true;
              }

            }

            if (this.workshop[2].workshop_sdate === this.date && this.workshop[2].workshop_edate === this.date &&
              this.form.workshop_paid_both === false && this.userinfo.Attend_Workshop !== "FREE") {

              if (this.form.registration_type_id === 10 || this.form.registration_type_id === 1) {
                this.show_loader_not_access_site = false;
              } else {
                this.show_loader_not_access_site = true;
              }

            }
          })
      }
		},
		loginDelegateAttendance(){
			if(sessionStorage.getItem('reload') === "false"){
				this.log.convention_member_id = this.form.member_id
				this.log.is_login = true
				this.log.is_logout = false

				this.$store.dispatch("vcc/create", this.log)
				.then(res => {
					console.log(res.data.message)
				})
				.catch(err => {
					console.error(err)
				})
			}
		},
		logoutDelegateAttendance(){
			this.log.convention_member_id = this.form.member_id
			this.log.is_login = false
			this.log.is_logout = true

			this.$store.dispatch("vcc/create", this.log)
			.then(res => {
				console.log(res.data.message)
			})
			.catch(err => {
				console.error(err)
			})
		},
		isReloaded(){
			if(sessionStorage.reload) {
				sessionStorage.setItem('reload', true);
			} else {
				sessionStorage.setItem('reload', false);
			}
			this.loginDelegateAttendance()
		},
		toggleChat() {
			this.chat_is_opened = !this.chat_is_opened
		}
	},
	mounted(){
		this.getUser();
		this.getNow();
		this.getShownOpeningWorkshop()
		window.addEventListener('beforeunload', function (e) {
            e.returnValue = 'msg';
        });
	}
}
</script>
<style lang="scss" scoped>

	.nav.nav-tabs {
		justify-content: center;
		border: none;
	}
	.nav-tabs .nav-link.active {
		border: 2px solid #ffffff;
	}
	.nav.nav-tabs .nav-item button {
		background: url('/assets/images/small-weave.png') right center repeat-y;
		border-radius: 10px;
		color: #000000;
		padding: 10px;
		box-shadow: 0 3px 3px rgba(0,0,0,0.3);
		max-width: 430px;
		width: 100%;

	}
	.nav.nav-tabs .nav-item button.orange {
		background-color: #ff7500;
	}
	.nav.nav-tabs .nav-item button.yellow {
		background-color: #fab623;
	}
	.nav.nav-tabs .nav-item button.blue {
		background-color: #0776bc;
	}
	.nav.nav-tabs .nav-item button span {
		display: block;
	}
	.tab-head-main.gwendolyn-bold {
		font-size: 2rem;
		line-height: 2.5rem;
	}
	.tab-head-second {
		font-weight: 700;
		text-transform: uppercase;
		font-size: 0.8rem;
	}
	.tab-content {
		padding: 40px 0;
	}
	.nav-item {
		flex: 1;
		display: flex;
		justify-content: center;
	}
	.vcc-program-flex {
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 0 0 20px;
	}
	.vcc-program-flex div:first-child {
		flex: 1.8;
		margin-right: 15px;
	}
	.attendance-check {
		flex: 0.2;
		text-align: center;
		padding: 5px;
	}
	.attendance-check h4 {
		font-size: 1.3rem;
		color: #4F9D5C;
		margin: 0;
		font-weight: 700;
	}
	.vcc-program {
		border-radius: 10px;
		box-shadow: 0 3px 3px rgba(0,0,0,0.3);
		overflow: hidden;
		margin: 0 0 20px;
	}
	.vcc-program h4 {
		display: block;
		background-color: #000000;
		color: #ffffff;
		text-transform: uppercase;
		font-weight: 700;
		padding: 12px 20px;
		font-size: 1.3rem;
		margin: 0;
	}
	.vcc-program h4.orange {
		background-color: #FF7500;
	}
	.vcc-program h4.blue {
		background-color: #065E99;
	}
	.vcc-program-time {
		display: flex;
		justify-content: space-between;
		padding: 10px 30px;
		font-size: 1.3rem;
		font-weight: 700;
		color: #000;
	}
	.vcc-program-time ul {
		margin: 0;
		padding: 0;
		list-style-position: inside;
		text-transform: uppercase;
	}
	.vcc-heading-text {
		text-align: center;
	}
	.vcc-heading-text h1 {
		font-size: 1.3rem;
		color: #065E99;
		font-weight: 700;
		margin: 0 0 25px;
	}
	.vcc-heading-text h2 {
		font-size: 1.5rem;
		background-color: #065E99;
		color: #ffffff;
		text-transform: uppercase;
		font-weight: 700;
		padding: 10px;
		border-radius: 10px;
		margin: 0 0 20px;
	}
	.vcc-heading-text h3 {
		font-size: 1.3rem;
		color: #065E99;
		font-weight: 700;
		margin: 0 0 20px;
	}

	.vcc-banner-img {
		position: relative;
		img {
			max-width: 100%;
            display: block;
		}
	}
	.vcc-switch-btn,
    .vcc-switch-btn-360 {
		padding: 50px 0;
		background: url(/assets/comm-lines-web.png) no-repeat center center;
		text-align: center;
		background-size: contain;
	}
	.vcc-switch-btn a,
    .vcc-switch-btn-360 a {
		text-transform: uppercase;
		color: #fff;
		background-color: #005b97;
		border-radius: 20px;
		display: inline-block;
		padding: 8px 30px;
		font-weight: 300;
		line-height: 25px;
		text-decoration: none;
		max-width: 320px;
		width: 100%;
	}
	.vcc-switch-btn a span,
    .vcc-switch-btn-360 a span {
		font-weight: 700;
		font-size: 25px;
	}
	.vcc-vimeo-container {
		position: absolute;
        top: 20.3%;
        left: 0;
        width: 59.1%;
        height: 58.7%;
        margin: 0 auto;
        right: 0;
	}
	.vcc-vimeo-container iframe {
		width: 100%;
		height: 100%;
	}
	.chat-box {
		position: fixed;
		right: 7%;
		bottom: 0%;
		background: #fff;
		z-index: 5;
		width: 320px;
	}
	.vimeo-chat-container {
		padding: 0px 10px;
		max-width: 340px;
		display: flex;
		flex-direction: column;
		height: 450px;
	}

	.checkbox {
		position: absolute; // take it out of document flow
		opacity: 0; // hide it

		& + label {
			position: relative;
			cursor: pointer;
			padding: 0;
		}

		// Box.
		& + label:before {
			content: '';
			display: inline-block;
			vertical-align: text-top;
			width: 42px;
			height: 42px;
			background: white;
			border: 3px solid #000;
			border-radius: 10px;
		}

		// Box hover
		&:hover + label:before {
			background: #f2f2f2;
		}

		// Box checked
		&:checked + label:before {
			background: #ffffff;
			border-color: #4F9D5C;
		}

		// Disabled state label.
		&:disabled + label {
			cursor: auto;
		}

		// Disabled box.
		&:disabled + label:before {
			box-shadow: none;
			background: #fff;
			border-color: #b8b8b8;
		}

		// Checkmark. Could be replaced with an image
		&:checked + label:after {
			content: '';
			position: absolute;
			left: 16px;
			top: 11px;
			width: 10px;
			height: 18px;
			border: solid #4F9D5C;
			border-width: 0 3px 3px 0;
			-webkit-transform: rotate(45deg);
			-ms-transform: rotate(45deg);
			transform: rotate(45deg);
		}
	}

	@media screen and (max-width: 1399px) {

		.nav-item {
			margin-right: 20px;
		}
		.nav-item:last-child {
			margin-right: 0;
		}

	}
	@media screen and (max-width: 1199px) {

		.tab-head-main.gwendolyn-bold {
			font-size: 1.5rem;
			line-height: 2rem;
		}
		.tab-head-second {
			letter-spacing: -1px;
		}

	}
	@media screen and (max-width: 991px) {
		.nav.nav-tabs .nav-item button {
			background-position: 105% center;
			padding: 10px;
		}
		.tab-head-main.gwendolyn-bold {
			font-size: .7rem !important;
			line-height: 1rem;
			font-family: "Source Sans Pro", sans-serif !important;
			font-weight: 700;
			text-transform: uppercase;
		}
		.tab-head-second {
			font-size: .7rem !important;
			line-height: normal;
		}
		.vcc-program h4 {
			font-size: 1.1rem;
		}
		.vcc-program-time {
			font-size: 1rem;
		}

	}
	@media screen and (max-width: 767px) {

		.nav.nav-tabs .nav-item button {
			background-position: 104% center;
		}
		.vcc-heading-text h1 {
			font-size: 1rem;
		}
		.vcc-heading-text h2,
		.vcc-heading-text h3 {
			font-size: 1.1rem;
		}

		.vcc-program-time {
			ul{
				list-style-type: none;
				width: 50%;
			}
			span {
				width: 30%;
			}
		}

	}
	@media screen and (max-width: 550px) {

		.nav.nav-tabs {
			flex-direction: column;
		}
		.nav-item {
			margin-right: 0;
			justify-content: center;
			margin-bottom: 10px;
		}
		.nav-item:last-child {
			justify-content: center;
		}
		.vcc-program h4 {
			font-size: 0.8rem;
		}
		.vcc-program-time {
			font-size: 0.8rem;
		}
		.nav.nav-tabs .nav-item button {
			background-position: 104% center;
		}

	}

	@media screen and (max-width: 285px) {//update 07-05
		.vcc-switch-btn a, .vcc-switch-btn-360 a {
			max-width: 220px;
	}
		.vcc-switch-btn a span, .vcc-switch-btn-360 a span {
			font-weight: 600;
			font-size: 20px;
		}
	}//end update
</style>
